<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>My Page Test</title>
</head>
<body>
<ul>
  <li><span th:text="${user.email}"></span></li>
  <li><span th:text="${user.nickname}"></span></li>
  <li><span th:text="${user.CreatedAt}"></span></li>
</ul>

<a th:href="@{/users/me/update}">회원 정보 수정</a>
<button class="delete">회원 탈퇴</button>
</body>


<script src="https://code.jquery.com/jquery-3.5.1.js"></script>

<!-- 회원 탈퇴 버튼을 눌렀을 때 DELETE 요청을 보내는 AJAX -->
<script>
  $(document).ready(function () {
    $('.delete').on('click', function () {
      if (confirm("정말 탈퇴 하시겠습니까?")) {
        $.ajax({
          url: '/users/me',
          type: 'DELETE',
          success: function (result) {
            alert("회원 탈퇴가 완료되었습니다.");
            window.location.href = '/users/logout';
          },
          error: function (err) {
            alert("회원 탈퇴 중 오류가 발생했습니다.");
          }
        });
      }
    });
  });
</script>
</html>